<!DOCTYPE html>
<html>
  <head>
    <title>Advanced Functions</title>
    <script></script>
  </head>
  <body>
    <button class="start" onclick="
    setTimeout(() => {
      document.querySelector('.start')
        .innerHTML = `loading...`;
    }, 1000);
    setTimeout(function(){
      document.querySelector('.start')
        .innerHTML = 'Finished!';
    }, 2000)
      ">Start</button>
    <button class="js-cart" onclick="displayCart();">Add to Cart</button>
    <p class="display-cart"></p>
    <button onclick="increase(); displayNotification();">Add</button>
    <button onclick="decrease();">Remove</button>
    <p>
      <button class="js-click-btn">Click</button>
    </p>
    <script>
      const btnElement = document.querySelector('.js-click-btn');
      const eventListner = () => {
          console.log('click');
      };
      btnElement.addEventListener('click', eventListner);

      btnElement.removeEventListener('click', eventListner);

      btnElement.addEventListener('click',() => {
        console.log('click2');
      });
      
      function increase(){
        console.log(messages);
        messages++;
      }
      function decrease(){
        if (messages > 0) {
          messages--;
          if (messages === 0) {
            stopNotification();
          }
        }
      }
      function stopNotification() {
        isDisplayNotification = false;

        clearInterval(intervalId);
        document.title = 'Advanced Functions';
        //displayNotification();
      }      
      let messages = 2;
      let intervalId;            
      let isDisplayNotification;
      displayNotification();
      function displayNotification(){

        if(isDisplayNotification){
          return;
        }
        isDisplayNotification = true;
        intervalId = setInterval(function () {
          if (document.title === 'Advanced Functions') {
            document.title = `(${messages}) New messages`;
          } else {
            document.title = 'Advanced Functions';
          }
        }, 1000);
      }

      let timeoutId;
      function displayCart(){
        const display =  document.querySelector('.display-cart');
        display.innerHTML = 'Added to Cart';
        if(timeoutId){
          clearTimeout(timeoutId);
        }
        timeoutId = setTimeout(() => {
          display.innerHTML = '';
        }, 2000)
      }
      /*
      function greeting(){
        console.log('hello');

      }
      greeting();
      const num = 2;
      //ananomoys functions
      const function1 = function() {
        console.log('hello2');
      };
      console.log(function1);
      console.log(typeof function1);
      function1();

      const obj = {
        num: 2,
        fun: function () {
          console.log('hello');
        }
      }
      obj.fun();
      function display(param) {
        console.log(param);
      }
      display(2);
      function run(param) {
        console.log(param);
      }
      run(function() {
        console.log('world')
      });
      */
    //  setTimeout(function() {
    //   console.log('timeout');
    //  }, 3000);
    //  console.log('next timeout');
    //  setInterval(function(){
    //   console.log('interval');
    //  }, 3000);
    //  console.log('next line2');
    [
      'make dineer',
      'wash dishes',
      'watch youtube'
    ].forEach((value,index) => {
      if(value === 'wash dishes'){
        return;
      }
      console.log(index);
      console.log(value);
    })
    let add = function (){
      console.log(2+3);
    };
    add();
    add();
    function runTwice(fun){
      //console.log('12b');
      fun();
      fun();
    }
    runTwice(add);

    const regularFunction = function(){
      console.log('Hello');
    };

    const arrowFunction = () => {
      console.log('Hello, World');
    };
    arrowFunction();
    
    const oneParam = param => {
      console.log(param + 1);
    };
    oneParam(2);

    const oneLine = () => 2 + 3;
    console.log(oneLine());

    const obj2 = {
      method: () => {

      },
      method(){

      }
    }

    console.log([1,-3,5].filter((value,index) => { return value >=0;
      // if(value >= 0){
      //   return true;
      // }else {
      //   return false;
      // }
    }));

    console.log([1,1,3].map((value,index) => {
      return value * 2;
    }));

    console.log([1,1,3].map(value => value * 2 ));

    const multiply = (num1,num2) => num1 * num2;
    console.log(multiply(2,3));
    console.log(multiply(7,10));
    function countPositive(nums){
      let result = 0;
      nums.forEach(value => {    
        if(value>=0){
          result = result + 1;
        }
      });
      return result;
    }
    const array = [-2,3,-5,7,10];
    console.log(countPositive(array));

    function addNum(array, num){
      console.log(array.map(value => value + num ));
    }
    addNum([-2,-1,0,99],2);

    function removeEgg(foods){
      let count = 0;
      return foods.filter(value => {
        if(value == 'egg' && count<2){
          count++;
          return false;
        }
        return true;
      });
    }
    console.log(removeEgg(['egg','egg','apple','egg','ham']));
    </script>
  </body>
</html>